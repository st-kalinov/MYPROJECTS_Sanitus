{"version":3,"sources":["../my-js/all_mainCat.js"],"names":["$","document","ready","mainCategorySlug","find","data","route","Routing","generate","slug","ionRangeSlider","type","min","max","from","to","postfix","grid","grid_num","hide_min_max","onFinish","val","activePage","makeAJAX","onUpdate","on","paginationBlockClass","e","preventDefault","currentTarget","clear_filters","page","brand","get_filter","brandBlockClass","prices","priceBlockClass","promotion","promotionBlockClass","ajax","url","method","contentType","JSON","stringify","price","beforeSend","show","success","hide","html","removeActivePageClass","setActivePageClass","setPreviousPage_dataPage","previousPageClass","setNextPage_dataPage","nextPageClass","error","toggleArrowIcon","className","inputType","values","each","index","element","push","removeClassFromElements","parentElement","classNameForRemove","removeClass","removeClassFromElement","elementNumber","classNameToAdd","addClass","dataValueToAdd","$element","$prevElementDataPage","prev","prop","update","collapseFilterBlocks","window","resize","windowWidth","width","target","children","toggleClass"],"mappings":"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","file":"all_mainCat.js","sourcesContent":["$(document).ready(function () {\r\n    const mainCategorySlug = $('#Options').find('h2.main-category:first').data('slug');\r\n    const route = Routing.generate('app_products_maincategory_filtered', {slug: mainCategorySlug}, true);\r\n\r\n    //-------------------------PRICE SLIDER ------------------------\r\n    $(\".js-range-slider\").ionRangeSlider({\r\n        type: \"double\",\r\n        min: 0,\r\n        max: 300,\r\n        from: 0,\r\n        to: 300,\r\n        postfix: 'лв.',\r\n        grid: true,\r\n        grid_num: 2,\r\n        hide_min_max: true,\r\n        onFinish: (data) => {\r\n            $('.js-price[name=\"minPrice\"]').val(data.from);\r\n            $('.js-price[name=\"maxPrice\"]').val(data.to);\r\n            activePage = 1;\r\n            makeAJAX();\r\n        },\r\n        onUpdate: (data) => {\r\n            $('.js-price[name=\"minPrice\"]').val(data.from);\r\n            $('.js-price[name=\"maxPrice\"]').val(data.to);\r\n            activePage = 1;\r\n            makeAJAX();\r\n        }\r\n    });\r\n    //--------------------PRICE SLIDER END---------------------------\r\n\r\n\r\n    $('#productFilterSection input:checkbox').on('click', () => {\r\n        activePage = 1;\r\n        makeAJAX();\r\n    });\r\n\r\n    $('body').on('click', `div.${paginationBlockClass} ul li`, (e) => {\r\n        e.preventDefault();\r\n        activePage = $(e.currentTarget).data(\"page\");\r\n        makeAJAX(activePage);\r\n\r\n    });\r\n\r\n    $('.clear-filters').on('click', () => {\r\n        clear_filters();\r\n    });\r\n\r\n    function makeAJAX(page = 1) {\r\n        let brand = get_filter(brandBlockClass, 'input:checkbox:checked');\r\n        let prices = get_filter(priceBlockClass, 'input');\r\n        let promotion = get_filter(promotionBlockClass, 'input:checkbox:checked');\r\n\r\n        $.ajax({\r\n            url: route,\r\n            method: 'POST',\r\n            contentType: 'application/json',\r\n            data: JSON.stringify({brand: brand, price: prices, promotion: promotion, page: page}),\r\n            beforeSend: () => {\r\n                $('.ajax-gif').show();\r\n            },\r\n            success: function (data) {\r\n                $('.ajax-gif').hide();\r\n                $('.products').html(data);\r\n                removeActivePageClass();\r\n                setActivePageClass(paginationBlockClass, \"ul li\", activePage,\"current-page\");\r\n                setPreviousPage_dataPage(paginationBlockClass, \"ul li\", previousPageClass, page - 1);\r\n                setNextPage_dataPage(paginationBlockClass, \"ul li\", nextPageClass, page + 1);\r\n            },\r\n            error: function () {\r\n                $('.ajax-gif').hide();\r\n            }\r\n        });\r\n    }\r\n\r\n    toggleArrowIcon();\r\n});\r\n\r\n\r\n\r\nconst brandBlockClass = \"js-brand\";\r\nconst priceBlockClass = \"js-prices\";\r\nconst promotionBlockClass = \"js-promotion\";\r\nconst paginationBlockClass = \"js-pagination\";\r\nconst previousPageClass = \".page-previous-item\";\r\nconst nextPageClass = \".page-next-item\";\r\n\r\nvar activePage = 1;\r\n\r\nfunction get_filter(className, inputType) {\r\n    let values = [];\r\n    $(`.${className} ${inputType}`).each((index, element) => {\r\n        values.push($(element).val());\r\n    });\r\n\r\n    return values;\r\n}\r\n\r\nfunction removeClassFromElements(parentElement, element, classNameForRemove) {\r\n    $(`.${parentElement} ${element}`).each((index, element) => {\r\n        $(element).removeClass(classNameForRemove);\r\n    });\r\n}\r\n\r\nfunction removeClassFromElement(parentElement, element, classNameForRemove) {\r\n    $(`.${parentElement} ${element}`).removeClass(classNameForRemove);\r\n}\r\n\r\nfunction removeActivePageClass() {\r\n    removeClassFromElement(paginationBlockClass, \"ul li\", \"default-page\");\r\n    removeClassFromElements(paginationBlockClass, \"ul li\", \"current-page\");\r\n}\r\n\r\nfunction setActivePageClass(parentElement, element, elementNumber, classNameToAdd) {\r\n    $(`.${parentElement} ${element}` + ':eq(' + (elementNumber) + ')').addClass(classNameToAdd);\r\n}\r\n\r\nfunction setPreviousPage_dataPage(parentElement, element, className, dataValueToAdd) {\r\n    if(dataValueToAdd >= 1) {\r\n        $(`.${parentElement} ${element}${className}`).data('page', dataValueToAdd);\r\n    }\r\n}\r\n\r\nfunction setNextPage_dataPage(parentElement, element, className, dataValueToAdd) {\r\n    let $element = $(`.${parentElement} ${element}${className}`);\r\n    let $prevElementDataPage = $element.prev().data('page');\r\n\r\n    if(dataValueToAdd <= $prevElementDataPage) {\r\n        $element.data('page', dataValueToAdd);\r\n    }\r\n    else {\r\n        $element.data('page', $prevElementDataPage);\r\n    }\r\n}\r\n\r\nfunction clear_filters() {\r\n    $('#productFilterSection input:checkbox').each((index, element) => {\r\n        $(element).prop('checked', false);\r\n    });\r\n    $(\".js-range-slider\").data('ionRangeSlider').update({from: 0, to: 300});\r\n}\r\n\r\n(function collapseFilterBlocks()\r\n{\r\n    $(window).resize(() => {\r\n        let windowWidth = $( window ).width();\r\n        if(windowWidth < 1000) {\r\n            $('#collapse1').removeClass('show');\r\n            $('#collapse2').removeClass('show');\r\n            $('#collapse3').removeClass('show');\r\n            $('h2.attribute-name i').removeClass('fas fa-chevron-circle-up').addClass('fas fa-chevron-circle-down');\r\n        }\r\n        else {\r\n            $('#collapse1').addClass('show');\r\n            $('#collapse2').addClass('show');\r\n            $('#collapse3').addClass('show');\r\n            $('h2.attribute-name i').removeClass('fas fa-chevron-circle-down').addClass('fas fa-chevron-circle-up');\r\n        }\r\n    });\r\n}());\r\n\r\n\r\nfunction toggleArrowIcon() {\r\n    $('h2.attribute-name').on('click', function (e) {\r\n        $(e.target).children('i').toggleClass('fas fa-chevron-circle-up fas fa-chevron-circle-down');\r\n    });\r\n    $('h2.attribute-name i').on('click', function (e) {\r\n        $(e.target).toggleClass('fas fa-chevron-circle-up fas fa-chevron-circle-down');\r\n    });\r\n}\r\n\r\n"]}