{"version":3,"sources":["../my-js/filtering_Cat.js"],"names":["$","document","ready","mainCategorySlug","find","data","subCategorySlug","categorySlug","route","Routing","generate","slug","slugSub","slugCat","ionRangeSlider","type","min","max","from","to","postfix","grid","grid_num","hide_min_max","onFinish","val","activePage","makeAJAX","onUpdate","on","paginationBlockClass","e","preventDefault","currentTarget","clear_filters","page","brand","get_filter","brandBlockClass","prices","priceBlockClass","promotion","promotionBlockClass","ajax","url","method","contentType","JSON","stringify","price","beforeSend","show","success","hide","html","removeActivePageClass","setActivePageClass","setPreviousPage_dataPage","previousPageClass","setNextPage_dataPage","nextPageClass","error","toggleArrowIcon"],"mappings":"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","file":"filtering_Cat.js","sourcesContent":["$(document).ready(function () {\r\n    const mainCategorySlug = $('#Options').find('h2.main-category:first').data('slug');\r\n    const subCategorySlug = $('#Options').find('h2.main-category:first').data('sub-slug');\r\n    const categorySlug = $('#Options').find('h2.main-category:first').data('cat-slug');\r\n    const route = Routing.generate('app_products_main_sub_category_filtered', {slug: mainCategorySlug, slugSub: subCategorySlug, slugCat: categorySlug }, true);\r\n\r\n    //-------------------------PRICE SLIDER ------------------------\r\n    $(\".js-range-slider\").ionRangeSlider({\r\n        type: \"double\",\r\n        min: 0,\r\n        max: 300,\r\n        from: 0,\r\n        to: 300,\r\n        postfix: 'лв.',\r\n        grid: true,\r\n        grid_num: 2,\r\n        hide_min_max: true,\r\n        onFinish: (data) => {\r\n            $('.js-price[name=\"minPrice\"]').val(data.from);\r\n            $('.js-price[name=\"maxPrice\"]').val(data.to);\r\n            activePage = 1;\r\n            makeAJAX();\r\n        },\r\n        onUpdate: (data) => {\r\n            $('.js-price[name=\"minPrice\"]').val(data.from);\r\n            $('.js-price[name=\"maxPrice\"]').val(data.to);\r\n            activePage = 1;\r\n            makeAJAX();\r\n        }\r\n    });\r\n    //--------------------PRICE SLIDER END---------------------------\r\n\r\n\r\n    $('#productFilterSection input:checkbox').on('click', () => {\r\n        activePage = 1;\r\n        makeAJAX();\r\n    });\r\n\r\n    $('body').on('click', `div.${paginationBlockClass} ul li`, (e) => {\r\n        e.preventDefault();\r\n        activePage = $(e.currentTarget).data(\"page\");\r\n        makeAJAX(activePage);\r\n\r\n    });\r\n\r\n    $('.clear-filters').on('click', () => {\r\n        clear_filters();\r\n    });\r\n\r\n    function makeAJAX(page = 1) {\r\n        let brand = get_filter(brandBlockClass, 'input:checkbox:checked');\r\n        let prices = get_filter(priceBlockClass, 'input');\r\n        let promotion = get_filter(promotionBlockClass, 'input:checkbox:checked');\r\n\r\n        $.ajax({\r\n            url: route,\r\n            method: 'POST',\r\n            contentType: 'application/json',\r\n            data: JSON.stringify({brand: brand, price: prices, promotion: promotion, page: page}),\r\n            beforeSend: () => {\r\n                $('.ajax-gif').show();\r\n            },\r\n            success: function (data) {\r\n                $('.ajax-gif').hide();\r\n                $('.products').html(data);\r\n                removeActivePageClass();\r\n                setActivePageClass(paginationBlockClass, \"ul li\", activePage,\"current-page\");\r\n                setPreviousPage_dataPage(paginationBlockClass, \"ul li\", previousPageClass, page - 1);\r\n                setNextPage_dataPage(paginationBlockClass, \"ul li\", nextPageClass, page + 1);\r\n            },\r\n            error: function () {\r\n                $('.ajax-gif').hide();\r\n            }\r\n        });\r\n    }\r\n\r\n    toggleArrowIcon();\r\n});"]}